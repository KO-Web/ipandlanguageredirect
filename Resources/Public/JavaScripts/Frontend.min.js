function IpandlanguageredirectFrontend(){"use strict";var e=this,n="ipandlanguageredirect_container",t="fadein",r={r:1},i="permanent",a=!1;this.initialize=function(){o(),u(),A()&&d(p(),w())};var o=function(){window.location.search.indexOf("ipandlanguagedebug=1")!==-1&&(a=!0,console.log("ipandlanguageredirect debug activated"))},u=function(){var e=h("data-ipandlanguageredirect-action","hideMessage");e.onclick=function(){U(),s()}},d=function(e,n){if(e){var t=new XMLHttpRequest;t.onreadystatechange=function(){if(4===this.readyState&&200===this.status){var e=JSON.parse(this.responseText);g(e)}},t.open("POST",O(e,n),!0),t.send()}else console.log("No ajax URI given!")},g=function(n){if(n.activated&&Array.isArray(n.events))for(var t in n.events)n.events.hasOwnProperty(t)&&e[n.events[t]+"Event"](n)};this.redirectEvent=function(e){var n=f(e.redirectUri);a?(console.log("Redirect to following URI:"),console.log(n)):window.location=n},this.suggestEvent=function(e){if(!y()){var n=f(e.redirectUri);a?(console.log("Suggest the following URI:"),console.log(n)):(c(e),l())}};var c=function(e){var n=h("data-ipandlanguageredirect-container","link");n.setAttribute("href",e.redirectUri)},l=function(){var e=h("data-ipandlanguageredirect-container","suggest");e.classList.add(t)},s=function(){var e=h("data-ipandlanguageredirect-container","suggest");e.classList.remove(t)},f=function(e){return O(e,r)},p=function(){var e=v();return null!==e?e.getAttribute("data-ajax-uri"):""},v=function(){return document.getElementById(n)},h=function(e,n){var t=document.querySelectorAll("["+e+"]");for(var r in t)if(t.hasOwnProperty(r)&&t[r].getAttribute(e)===n)return t[r];return null},w=function(){return{"tx_ipandlanguageredirect_pi1[browserLanguage]":m(),"tx_ipandlanguageredirect_pi1[ipAddress]":"","tx_ipandlanguageredirect_pi1[referrer]":x(),"tx_ipandlanguageredirect_pi1[languageUid]":_(),"tx_ipandlanguageredirect_pi1[rootpageUid]":b()}},m=function(){var e=navigator.language||navigator.userLanguage,n=e.split("-");return n[0]},x=function(){return document.referrer},_=function(){var e=v();return null!==e?e.getAttribute("data-language-uid"):0},b=function(){var e=v();return null!==e?e.getAttribute("data-rootpage-uid"):1},A=function(){var e=v();return null!==e&&window.location.href.indexOf("?r=1")===-1&&window.location.href.indexOf("&r=1")===-1},O=function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e+=e.indexOf("?")!==-1?"&":"?",e+=t+"="+n[t]);return e},y=function(){return"1"===I("ipandlanguageredirect_hidemessage")},U=function(){if("permanent"===i){var e=new Date,n=e.getTime();n+=31536e6,e.setTime(n),document.cookie="ipandlanguageredirect_hidemessage=1; expires="+e.toUTCString()+"; path=/",console.log(document.cookie)}else document.cookie="ipandlanguageredirect_hidemessage=1; path=/"},I=function(e){for(var n=e+"=",t=document.cookie.split(";"),r=0;r<t.length;r++){for(var i=t[r];" "===i.charAt(0);)i=i.substring(1);if(0===i.indexOf(n))return i.substring(n.length,i.length)}return""}}var Ipandlanguageredirect=new window.IpandlanguageredirectFrontend;Ipandlanguageredirect.initialize();